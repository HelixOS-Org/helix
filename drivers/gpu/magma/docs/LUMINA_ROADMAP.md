# LUMINA Development Roadmap

> *"The journey from vision to revolution."*

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                                                                               â•‘
â•‘                    L U M I N A   R O A D M A P                                â•‘
â•‘                                                                               â•‘
â•‘              2026 â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º 2030              â•‘
â•‘                                                                               â•‘
â•‘    Phase 1        Phase 2        Phase 3        Phase 4        Phase 5       â•‘
â•‘   Foundation    Compilation    Integration     Advanced      Ecosystem       â•‘
â•‘      â—‰â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—‰â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—‰â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—‰â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â—‰          â•‘
â•‘                                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## Executive Summary

| Phase | Timeline | Focus | Key Deliverables |
|-------|----------|-------|------------------|
| **1** | Q1-Q2 2026 | Foundation | Core types, math library, basic API surface |
| **2** | Q3-Q4 2026 | Shader Compilation | Rust-to-SPIR-V, proc macros, reflection |
| **3** | Q1-Q2 2027 | Backend Integration | Magma driver bridge, render graph execution |
| **4** | Q3 2027 - Q2 2028 | Advanced Features | Raytracing, mesh shaders, async compute |
| **5** | Q3 2028 - 2030 | Ecosystem | Tools, IDE integration, community |

---

## Phase 1: Foundation (Q1-Q2 2026)

### 1.1 Core Type System

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           CORE TYPE HIERARCHY                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚                              GpuData (unsafe trait)                         â”‚
â”‚                                    â”‚                                        â”‚
â”‚                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚                 â”‚                  â”‚                  â”‚                     â”‚
â”‚            GpuVertex          GpuUniforms        GpuStorage                 â”‚
â”‚                 â”‚                  â”‚                  â”‚                     â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚          â”‚             â”‚    â”‚             â”‚    â”‚             â”‚             â”‚
â”‚       Vertex2D    Vertex3D  SceneUBO   LightUBO  Particles  SSBO           â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Milestones

| ID | Task | Priority | Dependencies | Status |
|----|------|----------|--------------|--------|
| F1.1 | Define `GpuData` trait with safety invariants | P0 | - | âœ… Complete |
| F1.2 | Implement `GpuVertex` trait with attribute reflection | P0 | F1.1 | âœ… Complete |
| F1.3 | Implement `GpuUniforms` with std140/std430 layout | P0 | F1.1 | âœ… Complete |
| F1.4 | Handle system with generational indices | P0 | - | âœ… Complete |
| F1.5 | Type-safe buffer wrappers (`GpuBuffer<T>`) | P0 | F1.1, F1.4 | âœ… Complete |
| F1.6 | Texture type system with format safety | P0 | F1.4 | âœ… Complete |
| F1.7 | Sampler configuration and presets | P1 | F1.6 | âœ… Complete |
| F1.8 | Error types with diagnostic context | P1 | - | âœ… Complete |

### 1.2 Math Library (lumina-math)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           MATH PRIMITIVES                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   Vectors                 Matrices               Transforms                 â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€                â”€â”€â”€â”€â”€â”€â”€â”€               â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                 â”‚
â”‚   Vec2 (8B)               Mat2 (16B)             Rotation (Quat/Euler)      â”‚
â”‚   Vec3 (12B)              Mat3 (48B)*            Translation                â”‚
â”‚   Vec4 (16B)              Mat4 (64B)             Scale                      â”‚
â”‚                                                  Affine3D                   â”‚
â”‚   Integer Variants        Special                                           â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€        â”€â”€â”€â”€â”€â”€â”€                                           â”‚
â”‚   IVec2/3/4               Quaternion             * Mat3 uses std140 padding â”‚
â”‚   UVec2/3/4               DualQuat                                          â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Milestones

| ID | Task | Priority | Dependencies | Status |
|----|------|----------|--------------|--------|
| M1.1 | Vec2/Vec3/Vec4 with full operator overloading | P0 | - | âœ… Complete |
| M1.2 | Mat2/Mat3/Mat4 column-major layout | P0 | M1.1 | âœ… Complete |
| M1.3 | Perspective/Orthographic projection matrices | P0 | M1.2 | âœ… Complete |
| M1.4 | Look-at and view matrix construction | P0 | M1.2 | âœ… Complete |
| M1.5 | Quaternion implementation | P1 | M1.1 | ğŸ”² Pending |
| M1.6 | Dual quaternion for skeletal animation | P2 | M1.5 | ğŸ”² Pending |
| M1.7 | SIMD optimization (x86_64 AVX2) | P1 | M1.1-M1.4 | ğŸ”² Pending |
| M1.8 | SIMD optimization (AArch64 NEON) | P2 | M1.7 | ğŸ”² Pending |
| M1.9 | Geometric primitives (Ray, Plane, AABB, Frustum) | P1 | M1.1 | ğŸ”² Pending |
| M1.10 | Intersection tests | P1 | M1.9 | ğŸ”² Pending |

### 1.3 Derive Macros (lumina-derive)

```rust
// Target API for derive macros
#[derive(GpuVertex)]
#[repr(C)]
struct Vertex {
    #[location(0)]
    position: Vec3,
    #[location(1)]
    normal: Vec3,
    #[location(2)]
    uv: Vec2,
    #[location(3)]
    tangent: Vec4,
}

#[derive(GpuUniforms)]
#[repr(C)]
struct SceneData {
    model: Mat4,
    view: Mat4,
    projection: Mat4,
    camera_pos: Vec3,
    time: f32,
}
```

#### Milestones

| ID | Task | Priority | Dependencies | Status |
|----|------|----------|--------------|--------|
| D1.1 | `#[derive(GpuData)]` base implementation | P0 | F1.1 | âœ… Complete |
| D1.2 | `#[derive(GpuVertex)]` with location attributes | P0 | D1.1 | âœ… Complete |
| D1.3 | `#[derive(GpuUniforms)]` with std140 layout | P0 | D1.1 | âœ… Complete |
| D1.4 | Compile-time layout validation | P0 | D1.2, D1.3 | ğŸ”² Pending |
| D1.5 | Automatic padding insertion | P1 | D1.3 | ğŸ”² Pending |
| D1.6 | Nested struct support | P1 | D1.3 | ğŸ”² Pending |
| D1.7 | Array member support | P1 | D1.3 | ğŸ”² Pending |
| D1.8 | Diagnostic error messages | P1 | D1.1-D1.4 | ğŸ”² Pending |

---

## Phase 2: Shader Compilation (Q3-Q4 2026)

### 2.1 Shader Macro Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      SHADER COMPILATION PIPELINE                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   #[lumina::shader(vertex)]                                                 â”‚
â”‚   fn vertex_main(...) -> VertexOutput<...>                                  â”‚
â”‚         â”‚                                                                   â”‚
â”‚         â–¼                                                                   â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                       â”‚
â”‚   â”‚  Proc Macro     â”‚ â—„â”€â”€â”€ Parse Rust AST                                   â”‚
â”‚   â”‚  (lumina-derive)â”‚                                                       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                       â”‚
â”‚            â”‚                                                                â”‚
â”‚            â–¼                                                                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                       â”‚
â”‚   â”‚  Rust Subset    â”‚ â—„â”€â”€â”€ Validate shader-compatible code                  â”‚
â”‚   â”‚  Validator      â”‚      (no heap alloc, no recursion, etc.)              â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                       â”‚
â”‚            â”‚                                                                â”‚
â”‚            â–¼                                                                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                       â”‚
â”‚   â”‚  IR Generator   â”‚ â—„â”€â”€â”€ Convert to intermediate representation           â”‚
â”‚   â”‚  (lumina-ir)    â”‚                                                       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                       â”‚
â”‚            â”‚                                                                â”‚
â”‚            â–¼                                                                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                       â”‚
â”‚   â”‚  SPIR-V Backend â”‚ â—„â”€â”€â”€ Generate SPIR-V bytecode                         â”‚
â”‚   â”‚  (rspirv)       â”‚                                                       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                       â”‚
â”‚            â”‚                                                                â”‚
â”‚            â–¼                                                                â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                                       â”‚
â”‚   â”‚  Reflection     â”‚ â—„â”€â”€â”€ Extract bindings, locations, push constants      â”‚
â”‚   â”‚  Generator      â”‚                                                       â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                                       â”‚
â”‚            â”‚                                                                â”‚
â”‚            â–¼                                                                â”‚
â”‚   [SPIR-V bytes] + [ReflectionData] embedded in binary                      â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 Shader Language Subset

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LUMINA SHADER LANGUAGE SUBSET                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   ALLOWED                          â”‚  FORBIDDEN                             â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€                          â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€                             â”‚
â”‚   âœ“ Primitive types (f32, i32,     â”‚  âœ— Heap allocation (Box, Vec, etc.)   â”‚
â”‚     u32, bool)                     â”‚  âœ— Recursion                          â”‚
â”‚   âœ“ Vector/Matrix types            â”‚  âœ— Dynamic dispatch (dyn Trait)       â”‚
â”‚   âœ“ Fixed-size arrays              â”‚  âœ— String operations                  â”‚
â”‚   âœ“ Structs (Copy + repr(C))       â”‚  âœ— I/O operations                     â”‚
â”‚   âœ“ if/else, match                 â”‚  âœ— Panics (result in shader abort)    â”‚
â”‚   âœ“ for loops (bounded)            â”‚  âœ— Unbounded loops                    â”‚
â”‚   âœ“ while loops (with [[unroll]])  â”‚  âœ— Function pointers                  â”‚
â”‚   âœ“ Function calls (inlined)       â”‚  âœ— Closures (unless const)            â”‚
â”‚   âœ“ Const generics                 â”‚  âœ— Runtime generics                   â”‚
â”‚   âœ“ Built-in math (sin, cos, etc.) â”‚  âœ— libm dependency                    â”‚
â”‚   âœ“ Texture sampling               â”‚  âœ— Arbitrary memory access            â”‚
â”‚   âœ“ Atomic operations              â”‚  âœ— Synchronization primitives         â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Milestones

| ID | Task | Priority | Dependencies | Status |
|----|------|----------|--------------|--------|
| S2.1 | Define shader subset grammar | P0 | - | ğŸ”² Pending |
| S2.2 | Implement subset validator | P0 | S2.1 | ğŸ”² Pending |
| S2.3 | Create Lumina IR (intermediate representation) | P0 | S2.2 | ğŸ”² Pending |
| S2.4 | IR â†’ SPIR-V code generator | P0 | S2.3 | ğŸ”² Pending |
| S2.5 | Built-in function library (sin, cos, dot, etc.) | P0 | S2.4 | ğŸ”² Pending |
| S2.6 | Texture sampling intrinsics | P0 | S2.4 | ğŸ”² Pending |
| S2.7 | Vertex shader support | P0 | S2.4 | ğŸ”² Pending |
| S2.8 | Fragment shader support | P0 | S2.4 | ğŸ”² Pending |
| S2.9 | Compute shader support | P0 | S2.4 | ğŸ”² Pending |
| S2.10 | Push constant inference | P1 | S2.4 | ğŸ”² Pending |
| S2.11 | Descriptor set layout generation | P1 | S2.4 | ğŸ”² Pending |
| S2.12 | Shader reflection API | P0 | S2.4 | ğŸ”² Pending |
| S2.13 | SPIR-V optimization passes | P1 | S2.4 | ğŸ”² Pending |
| S2.14 | Debug info generation | P2 | S2.4 | ğŸ”² Pending |
| S2.15 | Shader hot-reload support | P2 | S2.4 | ğŸ”² Pending |

### 2.3 Cross-Compilation Targets

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       COMPILATION TARGETS                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚                          Lumina IR                                          â”‚
â”‚                              â”‚                                              â”‚
â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                       â”‚
â”‚        â”‚                     â”‚                     â”‚                       â”‚
â”‚        â–¼                     â–¼                     â–¼                       â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚   â”‚ SPIR-V  â”‚          â”‚  DXIL   â”‚          â”‚  Metal  â”‚                    â”‚
â”‚   â”‚ Vulkan  â”‚          â”‚  DX12   â”‚          â”‚   MSL   â”‚                    â”‚
â”‚   â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                    â”‚
â”‚        â”‚                    â”‚                    â”‚                         â”‚
â”‚        â–¼                    â–¼                    â–¼                         â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”‚
â”‚   â”‚  Magma  â”‚          â”‚  DX12   â”‚          â”‚  Metal  â”‚                    â”‚
â”‚   â”‚ Driver  â”‚          â”‚ Runtime â”‚          â”‚ Runtime â”‚                    â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â”‚
â”‚                                                                             â”‚
â”‚   Priority: SPIR-V (P0) â†’ Metal (P2) â†’ DXIL (P3)                           â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Phase 3: Backend Integration (Q1-Q2 2027)

### 3.1 Magma Driver Bridge

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     LUMINA â†’ MAGMA ARCHITECTURE                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   â”‚                        LUMINA API                                 â”‚     â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚     â”‚
â”‚   â”‚  â”‚ Context â”‚  â”‚  Frame  â”‚  â”‚ Buffer  â”‚  â”‚ Texture â”‚             â”‚     â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜             â”‚     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚           â”‚            â”‚            â”‚            â”‚                          â”‚
â”‚           â–¼            â–¼            â–¼            â–¼                          â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   â”‚                      BACKEND TRAIT                                â”‚     â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚     â”‚
â”‚   â”‚  â”‚  trait Backend {                                          â”‚   â”‚     â”‚
â”‚   â”‚  â”‚      fn create_buffer(...) -> BufferHandle;               â”‚   â”‚     â”‚
â”‚   â”‚  â”‚      fn create_texture(...) -> TextureHandle;             â”‚   â”‚     â”‚
â”‚   â”‚  â”‚      fn submit(&mut self, graph: &CompiledGraph);         â”‚   â”‚     â”‚
â”‚   â”‚  â”‚      fn present(&mut self, frame: FrameHandle);           â”‚   â”‚     â”‚
â”‚   â”‚  â”‚  }                                                        â”‚   â”‚     â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                    â”‚                                        â”‚
â”‚                                    â–¼                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   â”‚                      MAGMA BACKEND                                â”‚     â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚     â”‚
â”‚   â”‚  â”‚                    MagmaBackend                            â”‚  â”‚     â”‚
â”‚   â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚     â”‚
â”‚   â”‚  â”‚  â”‚ VkDevice     â”‚  â”‚ VkQueue      â”‚  â”‚ GSP Ring Buffer  â”‚ â”‚  â”‚     â”‚
â”‚   â”‚  â”‚  â”‚ VkAllocator  â”‚  â”‚ VkSwapchain  â”‚  â”‚ Command Streams  â”‚ â”‚  â”‚     â”‚
â”‚   â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚     â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                    â”‚                                        â”‚
â”‚                                    â–¼                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚   â”‚                         NVIDIA GPU                                â”‚     â”‚
â”‚   â”‚                    (via GSP Firmware)                             â”‚     â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Milestones

| ID | Task | Priority | Dependencies | Status |
|----|------|----------|--------------|--------|
| B3.1 | Define `Backend` trait with full API | P0 | F1.* | âœ… Complete |
| B3.2 | Implement `NullBackend` for testing | P0 | B3.1 | âœ… Complete |
| B3.3 | Create `MagmaBackend` skeleton | P0 | B3.1 | ğŸ”² Pending |
| B3.4 | Buffer creation via magma-mem | P0 | B3.3 | ğŸ”² Pending |
| B3.5 | Texture creation via magma-vulkan | P0 | B3.3 | ğŸ”² Pending |
| B3.6 | Pipeline creation with shader SPIR-V | P0 | B3.3, S2.* | ğŸ”² Pending |
| B3.7 | Descriptor set management | P0 | B3.6 | ğŸ”² Pending |
| B3.8 | Command buffer recording | P0 | B3.7 | ğŸ”² Pending |
| B3.9 | Queue submission | P0 | B3.8 | ğŸ”² Pending |
| B3.10 | Swapchain integration | P0 | B3.9 | ğŸ”² Pending |
| B3.11 | Frame synchronization (fences/semaphores) | P0 | B3.10 | ğŸ”² Pending |
| B3.12 | Resource upload streaming | P1 | B3.4, B3.5 | ğŸ”² Pending |
| B3.13 | Memory defragmentation | P2 | B3.4 | ğŸ”² Pending |

### 3.2 Render Graph Execution

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    RENDER GRAPH EXECUTION ENGINE                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   Frame Recording                       Compilation                         â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                       â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                         â”‚
â”‚                                                                             â”‚
â”‚   frame.render()                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚       .clear(BLACK)          â”€â”€â”€â–º       â”‚ Dependency Analysis â”‚             â”‚
â”‚       .draw(&mesh)                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚       .with(vs, fs)                                â”‚                        â”‚
â”‚       .submit();                                   â–¼                        â”‚
â”‚                                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚                                         â”‚  Barrier Insertion  â”‚             â”‚
â”‚                                         â”‚  (automatic)        â”‚             â”‚
â”‚                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                    â”‚                        â”‚
â”‚                                                    â–¼                        â”‚
â”‚                                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚                                         â”‚   Pass Merging      â”‚             â”‚
â”‚                                         â”‚   (optimization)    â”‚             â”‚
â”‚                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                    â”‚                        â”‚
â”‚                                                    â–¼                        â”‚
â”‚                                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚                                         â”‚  Command Generation â”‚             â”‚
â”‚                                         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                                                    â”‚                        â”‚
â”‚   Execution                                        â”‚                        â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€                                        â–¼                        â”‚
â”‚                                         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
â”‚   VkCmdBeginRenderPass  â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€    â”‚     Execution       â”‚             â”‚
â”‚   VkCmdBindPipeline                     â”‚     on GPU          â”‚             â”‚
â”‚   VkCmdDraw                             â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚   VkCmdEndRenderPass                                                        â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Milestones

| ID | Task | Priority | Dependencies | Status |
|----|------|----------|--------------|--------|
| G3.1 | Resource dependency tracking | P0 | F1.* | âœ… Complete |
| G3.2 | Automatic barrier insertion | P0 | G3.1 | âœ… Complete |
| G3.3 | Image layout transitions | P0 | G3.2 | âœ… Complete |
| G3.4 | Pass merging optimization | P1 | G3.2 | ğŸ”² Pending |
| G3.5 | Resource aliasing (memory reuse) | P1 | G3.4 | ğŸ”² Pending |
| G3.6 | Async compute scheduling | P1 | G3.2 | ğŸ”² Pending |
| G3.7 | Transfer queue utilization | P2 | G3.6 | ğŸ”² Pending |
| G3.8 | Multi-queue submission | P2 | G3.6, G3.7 | ğŸ”² Pending |
| G3.9 | Frame graph caching | P1 | G3.1-G3.3 | ğŸ”² Pending |
| G3.10 | Incremental recompilation | P2 | G3.9 | ğŸ”² Pending |

---

## Phase 4: Advanced Features (Q3 2027 - Q2 2028)

### 4.1 Raytracing Support

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      LUMINA RAYTRACING API                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   #[lumina::shader(raygen)]                                                 â”‚
â”‚   fn raygen(                                                                â”‚
â”‚       dispatch_id: UVec3,                                                   â”‚
â”‚       scene: &AccelerationStructure,                                        â”‚
â”‚       output: &mut Image2D<Rgba8>,                                          â”‚
â”‚   ) {                                                                       â”‚
â”‚       let ray = camera.cast_ray(dispatch_id.xy());                          â”‚
â”‚       let hit = scene.trace(ray);                                           â”‚
â”‚                                                                             â”‚
â”‚       output.store(dispatch_id.xy(), hit.color());                          â”‚
â”‚   }                                                                         â”‚
â”‚                                                                             â”‚
â”‚   #[lumina::shader(closest_hit)]                                            â”‚
â”‚   fn closest_hit(hit: &HitInfo) -> Vec4 {                                   â”‚
â”‚       let material = materials[hit.instance_id];                            â”‚
â”‚       shade(hit.position, hit.normal, material)                             â”‚
â”‚   }                                                                         â”‚
â”‚                                                                             â”‚
â”‚   #[lumina::shader(miss)]                                                   â”‚
â”‚   fn miss() -> Vec4 {                                                       â”‚
â”‚       sample_skybox(ray.direction)                                          â”‚
â”‚   }                                                                         â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Milestones

| ID | Task | Priority | Dependencies | Status |
|----|------|----------|--------------|--------|
| R4.1 | Define `AccelerationStructure` type | P1 | B3.* | ğŸ”² Pending |
| R4.2 | BLAS (Bottom-Level AS) building | P1 | R4.1 | ğŸ”² Pending |
| R4.3 | TLAS (Top-Level AS) building | P1 | R4.2 | ğŸ”² Pending |
| R4.4 | Ray generation shader support | P1 | S2.*, R4.3 | ğŸ”² Pending |
| R4.5 | Closest hit shader support | P1 | R4.4 | ğŸ”² Pending |
| R4.6 | Miss shader support | P1 | R4.4 | ğŸ”² Pending |
| R4.7 | Any hit shader support | P2 | R4.4 | ğŸ”² Pending |
| R4.8 | Intersection shader support | P2 | R4.4 | ğŸ”² Pending |
| R4.9 | Shader binding table management | P1 | R4.4-R4.6 | ğŸ”² Pending |
| R4.10 | Ray query in compute/fragment | P2 | R4.3 | ğŸ”² Pending |
| R4.11 | AS compaction | P2 | R4.2 | ğŸ”² Pending |
| R4.12 | Dynamic AS updates | P2 | R4.3 | ğŸ”² Pending |

### 4.2 Mesh Shaders

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       MESH SHADER PIPELINE                                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   Traditional Pipeline          â”‚    Mesh Shader Pipeline                   â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€          â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚                                 â”‚                                           â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚   â”‚ Input Assembly  â”‚           â”‚    â”‚   Task Shader   â”‚ â—„â”€â”€ Coarse cullingâ”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚            â”‚                    â”‚             â”‚                             â”‚
â”‚            â–¼                    â”‚             â–¼                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚   â”‚ Vertex Shader   â”‚           â”‚    â”‚   Mesh Shader   â”‚ â—„â”€â”€ Generate mesh â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚            â”‚                    â”‚             â”‚                             â”‚
â”‚            â–¼                    â”‚             â”‚                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚             â”‚                             â”‚
â”‚   â”‚  (Tessellation) â”‚           â”‚             â”‚                             â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚             â”‚                             â”‚
â”‚            â”‚                    â”‚             â”‚                             â”‚
â”‚            â–¼                    â”‚             â–¼                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚   â”‚   Rasterizer    â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”‚   Rasterizer    â”‚                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚            â”‚                    â”‚             â”‚                             â”‚
â”‚            â–¼                    â”‚             â–¼                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚   â”‚ Fragment Shader â”‚           â”‚    â”‚ Fragment Shader â”‚                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚                                 â”‚                                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Milestones

| ID | Task | Priority | Dependencies | Status |
|----|------|----------|--------------|--------|
| MS4.1 | Task shader support | P2 | S2.* | ğŸ”² Pending |
| MS4.2 | Mesh shader support | P2 | MS4.1 | ğŸ”² Pending |
| MS4.3 | Meshlet generation utilities | P2 | MS4.2 | ğŸ”² Pending |
| MS4.4 | Cluster culling | P2 | MS4.3 | ğŸ”² Pending |
| MS4.5 | LOD selection in task shader | P2 | MS4.4 | ğŸ”² Pending |
| MS4.6 | Nanite-style virtualized geometry | P3 | MS4.5 | ğŸ”² Pending |

### 4.3 Async Compute & Advanced Synchronization

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    MULTI-QUEUE EXECUTION MODEL                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   Time â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º       â”‚
â”‚                                                                             â”‚
â”‚   Graphics    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ        â”‚
â”‚   Queue       Geometry  â”‚ wait   â”‚ Lighting   â”‚ wait   â”‚ Post-Process      â”‚
â”‚                         â”‚        â”‚            â”‚        â”‚                    â”‚
â”‚                         â”‚        â”‚            â”‚        â”‚                    â”‚
â”‚   Compute     â–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘        â”‚
â”‚   Queue             SSAO          Bloom/DOF    TAA                          â”‚
â”‚                     â”‚                    â”‚                                  â”‚
â”‚                     â”‚                    â”‚                                  â”‚
â”‚   Transfer    â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘        â”‚
â”‚   Queue       Texture                                                       â”‚
â”‚               Upload                                                        â”‚
â”‚                                                                             â”‚
â”‚   Legend: â–ˆâ–ˆ = Active work   â–‘â–‘ = Available for other work                  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Milestones

| ID | Task | Priority | Dependencies | Status |
|----|------|----------|--------------|--------|
| AC4.1 | Compute queue abstraction | P1 | B3.* | ğŸ”² Pending |
| AC4.2 | Timeline semaphore support | P1 | AC4.1 | ğŸ”² Pending |
| AC4.3 | Cross-queue resource sharing | P1 | AC4.2 | ğŸ”² Pending |
| AC4.4 | Automatic compute overlap | P2 | AC4.3, G3.6 | ğŸ”² Pending |
| AC4.5 | Transfer queue streaming | P2 | AC4.1 | ğŸ”² Pending |
| AC4.6 | Sparse binding support | P3 | AC4.5 | ğŸ”² Pending |

---

## Phase 5: Ecosystem & Tooling (Q3 2028 - 2030)

### 5.1 Development Tools

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         LUMINA TOOLCHAIN                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                        lumina-cli                                    â”‚  â”‚
â”‚   â”‚  $ lumina new my-app              # Create new project               â”‚  â”‚
â”‚   â”‚  $ lumina build                   # Compile shaders + app            â”‚  â”‚
â”‚   â”‚  $ lumina check                   # Validate shader code             â”‚  â”‚
â”‚   â”‚  $ lumina disasm main.rs:42       # Disassemble shader at line       â”‚  â”‚
â”‚   â”‚  $ lumina profile --gpu           # GPU performance profile          â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                     lumina-inspector (GUI)                           â”‚  â”‚
â”‚   â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚
â”‚   â”‚  â”‚ Frame Timeline    â”‚ Resource View    â”‚ Pipeline State          â”‚ â”‚  â”‚
â”‚   â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚  â”‚
â”‚   â”‚  â”‚ â–¶ Frame 142       â”‚ Textures         â”‚ Graphics Pipeline #3    â”‚ â”‚  â”‚
â”‚   â”‚  â”‚   â”œâ”€ RenderPass 0 â”‚  â”œâ”€ albedo.ktx2  â”‚  Vertex: main_vs        â”‚ â”‚  â”‚
â”‚   â”‚  â”‚   â”‚  â”œâ”€ Draw 0    â”‚  â”œâ”€ normal.ktx2  â”‚  Fragment: main_fs      â”‚ â”‚  â”‚
â”‚   â”‚  â”‚   â”‚  â””â”€ Draw 1    â”‚  â””â”€ roughness    â”‚  Blend: Alpha           â”‚ â”‚  â”‚
â”‚   â”‚  â”‚   â””â”€ Compute 0    â”‚ Buffers          â”‚  Depth: Less, Write     â”‚ â”‚  â”‚
â”‚   â”‚  â”‚      â””â”€ Dispatch  â”‚  â”œâ”€ vertex_buf   â”‚                         â”‚ â”‚  â”‚
â”‚   â”‚  â”‚                   â”‚  â””â”€ uniform_buf  â”‚                         â”‚ â”‚  â”‚
â”‚   â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚                     VS Code Extension                                â”‚  â”‚
â”‚   â”‚  â€¢ Shader syntax highlighting (inline Rust + SPIR-V)                â”‚  â”‚
â”‚   â”‚  â€¢ Type-aware autocomplete for GPU types                            â”‚  â”‚
â”‚   â”‚  â€¢ Inline SPIR-V disassembly                                        â”‚  â”‚
â”‚   â”‚  â€¢ Shader performance hints                                         â”‚  â”‚
â”‚   â”‚  â€¢ Live reload integration                                          â”‚  â”‚
â”‚   â”‚  â€¢ GPU debugger integration                                         â”‚  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Milestones

| ID | Task | Priority | Dependencies | Status |
|----|------|----------|--------------|--------|
| T5.1 | lumina-cli scaffolding | P2 | Phase 1-3 | ğŸ”² Pending |
| T5.2 | Project template system | P2 | T5.1 | ğŸ”² Pending |
| T5.3 | Shader validation command | P1 | S2.* | ğŸ”² Pending |
| T5.4 | SPIR-V disassembler integration | P2 | S2.* | ğŸ”² Pending |
| T5.5 | Frame capture API | P2 | B3.* | ğŸ”² Pending |
| T5.6 | lumina-inspector skeleton | P2 | T5.5 | ğŸ”² Pending |
| T5.7 | Resource browser | P2 | T5.6 | ğŸ”² Pending |
| T5.8 | Pipeline state viewer | P2 | T5.6 | ğŸ”² Pending |
| T5.9 | VS Code extension basics | P2 | S2.* | ğŸ”² Pending |
| T5.10 | Shader syntax highlighting | P2 | T5.9 | ğŸ”² Pending |
| T5.11 | Inline SPIR-V preview | P3 | T5.9 | ğŸ”² Pending |
| T5.12 | GPU profiler integration | P2 | T5.5 | ğŸ”² Pending |

### 5.2 Asset Pipeline

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         ASSET PIPELINE                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   Source Assets                Lumina Asset Format              Runtime     â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€              â”€â”€â”€â”€â”€â”€â”€     â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  .gltf/.glb â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚   .lumesh       â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ GpuMesh   â”‚  â”‚
â”‚   â”‚  .fbx       â”‚   meshlang   â”‚   (optimized    â”‚          â”‚           â”‚  â”‚
â”‚   â”‚  .obj       â”‚              â”‚    geometry)    â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  .png/.jpg  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚   .lumtex       â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ GpuTextureâ”‚  â”‚
â”‚   â”‚  .exr/.hdr  â”‚   texlang    â”‚   (BC/ASTC      â”‚          â”‚           â”‚  â”‚
â”‚   â”‚  .tga       â”‚              â”‚    compressed)  â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚   â”‚  .lummat    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚   .lummat       â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚ Material  â”‚  â”‚
â”‚   â”‚  (material  â”‚   compile    â”‚   (shader +     â”‚          â”‚ Instance  â”‚  â”‚
â”‚   â”‚   source)   â”‚              â”‚    params)      â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Milestones

| ID | Task | Priority | Dependencies | Status |
|----|------|----------|--------------|--------|
| A5.1 | Define .lumesh binary format | P2 | F1.* | ğŸ”² Pending |
| A5.2 | glTF importer | P2 | A5.1 | ğŸ”² Pending |
| A5.3 | Mesh optimization (vertex cache) | P2 | A5.2 | ğŸ”² Pending |
| A5.4 | Meshlet generation | P2 | A5.3 | ğŸ”² Pending |
| A5.5 | Define .lumtex format | P2 | F1.* | ğŸ”² Pending |
| A5.6 | BC7/ASTC compression | P2 | A5.5 | ğŸ”² Pending |
| A5.7 | Mipmap generation | P2 | A5.6 | ğŸ”² Pending |
| A5.8 | KTX2 support | P3 | A5.5 | ğŸ”² Pending |
| A5.9 | Material definition language | P2 | S2.* | ğŸ”² Pending |
| A5.10 | Material compiler | P2 | A5.9 | ğŸ”² Pending |
| A5.11 | Asset streaming runtime | P2 | A5.* | ğŸ”² Pending |
| A5.12 | Virtual texture support | P3 | A5.11 | ğŸ”² Pending |

### 5.3 Higher-Level Frameworks

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       FRAMEWORK LAYERS                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚                   â”‚         lumina-ui                 â”‚                     â”‚
â”‚                   â”‚   Immediate-mode UI system        â”‚                     â”‚
â”‚                   â”‚   (egui-like, GPU accelerated)    â”‚                     â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                                             â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚                   â”‚         lumina-3d                 â”‚                     â”‚
â”‚                   â”‚   High-level 3D renderer          â”‚                     â”‚
â”‚                   â”‚   (PBR, shadows, post-process)    â”‚                     â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                                             â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
â”‚                   â”‚         lumina-scene              â”‚                     â”‚
â”‚                   â”‚   Scene graph & ECS integration   â”‚                     â”‚
â”‚                   â”‚   (Transform hierarchy, culling)  â”‚                     â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
â”‚                                                                             â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚   â”‚                             lumina                                    â”‚ â”‚
â”‚   â”‚   Core API (Context, Frame, Buffer, Texture, Shader, RenderGraph)    â”‚ â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### Milestones

| ID | Task | Priority | Dependencies | Status |
|----|------|----------|--------------|--------|
| F5.1 | lumina-ui: Core widget system | P2 | Phase 1-3 | ğŸ”² Pending |
| F5.2 | lumina-ui: Text rendering | P2 | F5.1 | ğŸ”² Pending |
| F5.3 | lumina-ui: Layout system | P2 | F5.1 | ğŸ”² Pending |
| F5.4 | lumina-3d: PBR material system | P2 | Phase 1-3 | ğŸ”² Pending |
| F5.5 | lumina-3d: Shadow mapping | P2 | F5.4 | ğŸ”² Pending |
| F5.6 | lumina-3d: Screen-space effects | P2 | F5.4 | ğŸ”² Pending |
| F5.7 | lumina-scene: Transform hierarchy | P2 | Phase 1-3 | ğŸ”² Pending |
| F5.8 | lumina-scene: Frustum culling | P2 | F5.7 | ğŸ”² Pending |
| F5.9 | lumina-scene: Occlusion culling | P3 | F5.8 | ğŸ”² Pending |

---

## Risk Assessment

### Technical Risks

| Risk | Probability | Impact | Mitigation |
|------|-------------|--------|------------|
| Rust-to-SPIR-V complexity | High | Critical | Start with limited subset, expand incrementally |
| rust-gpu instability | Medium | High | Develop fallback IR if needed |
| GPU driver bugs | Medium | Medium | Extensive testing, workaround database |
| Performance regression | Low | High | Continuous benchmarking, comparison with raw Vulkan |
| Memory safety edge cases | Medium | Critical | Fuzzing, property-based testing |

### Resource Risks

| Risk | Probability | Impact | Mitigation |
|------|-------------|--------|------------|
| Scope creep | High | Medium | Strict phase gates, MVP focus |
| Documentation debt | High | Medium | Doc-first development culture |
| Community adoption | Medium | Medium | Open development, early examples |

---

## Success Metrics

### Phase 1 (Foundation)
- [ ] All core types compile and pass unit tests
- [ ] Derive macros generate correct layouts
- [ ] Math library matches GLM output (within epsilon)

### Phase 2 (Shader Compilation)
- [ ] Hello triangle shader compiles to valid SPIR-V
- [ ] 100+ shader patterns pass validation
- [ ] Compilation time < 100ms for typical shader

### Phase 3 (Backend Integration)
- [ ] Triangle renders on NVIDIA GPU via Magma
- [ ] 10,000 draw calls at 60fps
- [ ] Memory usage within 10% of raw Vulkan

### Phase 4 (Advanced Features)
- [ ] Raytracing demo renders correctly
- [ ] Mesh shader demo outperforms traditional pipeline
- [ ] Async compute provides measurable performance gain

### Phase 5 (Ecosystem)
- [ ] 3+ non-trivial applications built with Lumina
- [ ] Inspector can capture and replay frames
- [ ] Active community with external contributors

---

## Appendix A: Dependency Graph

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      CRATE DEPENDENCY STRUCTURE                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   External                                                                  â”‚
â”‚   â”€â”€â”€â”€â”€â”€â”€â”€                                                                  â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
â”‚   â”‚  rspirv  â”‚  â”‚   syn    â”‚  â”‚  quote   â”‚  â”‚proc-macroâ”‚                   â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
â”‚        â”‚              â”‚            â”‚              â”‚                         â”‚
â”‚        â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚        â”‚                           â”‚                                        â”‚
â”‚        â–¼                           â–¼                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚   â”‚lumina-shader â”‚          â”‚lumina-derive â”‚                                â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚        â”‚                           â”‚                                        â”‚
â”‚        â”‚                           â”‚                                        â”‚
â”‚        â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚                                        â”‚
â”‚        â”‚    â”‚ lumina-math  â”‚       â”‚                                        â”‚
â”‚        â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚                                        â”‚
â”‚        â”‚           â”‚               â”‚                                        â”‚
â”‚        â–¼           â–¼               â–¼                                        â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚   â”‚                        lumina                            â”‚              â”‚
â”‚   â”‚  (context, frame, buffer, texture, graph, pipeline,...)  â”‚              â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                              â”‚                                              â”‚
â”‚                              â–¼                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚   â”‚                    magma-vulkan                          â”‚              â”‚
â”‚   â”‚            (Vulkan driver implementation)                â”‚              â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                              â”‚                                              â”‚
â”‚                              â–¼                                              â”‚
â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
â”‚   â”‚                      magma-gsp                           â”‚              â”‚
â”‚   â”‚               (GSP Ring Buffer / GPU HW)                 â”‚              â”‚
â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Appendix B: Glossary

| Term | Definition |
|------|------------|
| **BLAS** | Bottom-Level Acceleration Structure (per-mesh) |
| **GSP** | GPU System Processor (NVIDIA firmware interface) |
| **IR** | Intermediate Representation |
| **Meshlet** | A small cluster of triangles for mesh shaders |
| **SPIR-V** | Standard Portable Intermediate Representation (Vulkan shaders) |
| **SSBO** | Shader Storage Buffer Object |
| **TLAS** | Top-Level Acceleration Structure (scene-wide) |
| **UBO** | Uniform Buffer Object |

---

## Appendix C: Code Size Estimation

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    LUMINA - ESTIMATION LIGNES DE CODE                         â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘   Phase 1 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  ~15,000 LOC    â•‘
â•‘   Phase 2 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  ~35,000 LOC    â•‘
â•‘   Phase 3 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  ~55,000 LOC    â•‘
â•‘   Phase 4 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  ~85,000 LOC    â•‘
â•‘   Phase 5 â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘  ~140,000 LOC   â•‘
â•‘                                                                               â•‘
â•‘   TOTAL ESTIMÃ‰ : 140,000 - 180,000 LIGNES DE CODE                            â•‘
â•‘                                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### Summary by Phase

| Phase | Timeline | LOC Added | Cumulative | Duration |
|-------|----------|-----------|------------|----------|
| **Phase 1** | Q1-Q2 2026 | ~15,000 | ~15,000 | 6 months |
| **Phase 2** | Q3-Q4 2026 | ~20,000 | ~35,000 | 6 months |
| **Phase 3** | Q1-Q2 2027 | ~20,000 | ~55,000 | 6 months |
| **Phase 4** | Q3 2027 - Q2 2028 | ~30,000 | ~85,000 | 12 months |
| **Phase 5** | Q3 2028 - 2030 | ~55,000 | ~140,000 | 18 months |

### Phase 1: Foundation (~15,000 LOC)

| Crate | Modules | LOC | Justification |
|-------|---------|-----|---------------|
| **lumina-core** | types, handle, error, state, resource | ~3,500 | Core types, traits, error handling |
| **lumina-math** | vec, mat, quat, transform, geometry | ~4,000 | Vec2/3/4, Mat2/3/4, Quaternion, SIMD |
| **lumina-derive** | gpu_data, gpu_vertex, gpu_uniforms | ~2,500 | Proc macros with validation |
| **lumina** (base) | context, buffer, texture, sampler | ~5,000 | Base API, type-safe wrappers |

### Phase 2: Shader Compilation (~20,000 LOC)

| Crate | Modules | LOC | Justification |
|-------|---------|-----|---------------|
| **lumina-shader** | parser, validator, ir, spirv_gen | ~8,000 | Rust subset parsing, IR generation |
| **lumina-ir** | types, instructions, optimizer | ~5,000 | Intermediate representation |
| **lumina-spirv** | builder, reflection, optimizer | ~4,000 | SPIR-V emission via rspirv |
| **lumina-derive** (ext) | shader macro, intrinsics | ~3,000 | `#[lumina::shader]` macro |

### Phase 3: Backend Integration (~20,000 LOC)

| Crate | Modules | LOC | Justification |
|-------|---------|-----|---------------|
| **lumina-backend** | trait, null, validation | ~2,000 | Backend abstraction |
| **lumina-magma** | device, queue, swapchain, sync | ~8,000 | Bridge to magma-vulkan |
| **lumina-graph** | builder, compiler, executor, barrier | ~6,000 | Advanced render graph |
| **lumina** (ext) | frame, pipeline_cache, descriptor | ~4,000 | Main API extensions |

### Phase 4: Advanced Features (~30,000 LOC)

| Crate | Modules | LOC | Justification |
|-------|---------|-----|---------------|
| **lumina-rt** | accel_struct, blas, tlas, sbt | ~10,000 | Complete raytracing support |
| **lumina-mesh** | meshlet, task_shader, mesh_shader | ~6,000 | Mesh shaders |
| **lumina-compute** | async_queue, timeline_sem | ~4,000 | Async compute |
| **lumina-shader** (ext) | rt_shaders, mesh_shaders | ~5,000 | New shader types |
| **lumina** (ext) | advanced sync, sparse binding | ~5,000 | Advanced features |

### Phase 5: Ecosystem & Tooling (~55,000 LOC)

| Crate | Modules | LOC | Justification |
|-------|---------|-----|---------------|
| **lumina-cli** | commands, project, build | ~5,000 | Command-line tool |
| **lumina-inspector** | capture, ui, replay | ~15,000 | GPU debugger GUI |
| **lumina-vscode** | syntax, lsp, preview | ~8,000 | VS Code extension |
| **lumina-asset** | mesh, texture, material | ~7,000 | Asset pipeline |
| **lumina-ui** | widgets, text, layout | ~8,000 | Immediate-mode UI system |
| **lumina-3d** | pbr, shadows, post_fx | ~7,000 | High-level 3D renderer |
| **lumina-scene** | transform, culling, ecs | ~5,000 | Scene graph |

### Complete Breakdown

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    DISTRIBUTION PAR TYPE DE CODE                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                             â”‚
â”‚   API & Types          â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  35%  (~49K)   â”‚
â”‚                                                                             â”‚
â”‚   Shader Compiler      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  25%  (~35K)   â”‚
â”‚                                                                             â”‚
â”‚   Backend/Driver       â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  15%  (~21K)   â”‚
â”‚                                                                             â”‚
â”‚   Tooling              â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘  12%  (~17K)   â”‚
â”‚                                                                             â”‚
â”‚   Tests                â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   8%  (~11K)   â”‚
â”‚                                                                             â”‚
â”‚   Documentation        â–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘   5%   (~7K)   â”‚
â”‚                                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Grand Total

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                         ESTIMATION TOTALE LUMINA                              â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                                               â•‘
â•‘   Code Source Rust ............................ 140,000 - 160,000 LOC        â•‘
â•‘   Tests Unitaires + IntÃ©gration ............... 20,000 - 30,000 LOC          â•‘
â•‘   Documentation (rustdoc + guides) ............ 15,000 - 20,000 LOC          â•‘
â•‘   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â•‘
â•‘   GRAND TOTAL ................................. 175,000 - 210,000 LOC        â•‘
â•‘                                                                               â•‘
â•‘   ğŸ“Š Nombre de crates ......................... 15 - 20                       â•‘
â•‘   ğŸ“… Temps de dÃ©veloppement ................... 3 - 4 ans                     â•‘
â•‘   ğŸ‘¥ Ã‰quipe recommandÃ©e ....................... 3 - 5 dÃ©veloppeurs            â•‘
â•‘   ğŸ’° Valeur estimÃ©e (Ã  $50/LOC) ............... $8.75M - $10.5M USD           â•‘
â•‘                                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### Comparison with Similar Projects

| Project | Lines of Code | Scope |
|---------|---------------|-------|
| **wgpu** | ~150,000 | WebGPU implementation |
| **vulkano** | ~80,000 | Vulkan wrapper Rust |
| **ash** | ~50,000 | Vulkan bindings Rust |
| **gfx-rs** | ~100,000 | Graphics abstraction |
| **rust-gpu** | ~60,000 | Rust â†’ SPIR-V compiler |
| **LUMINA (estimated)** | **~160,000** | Full API + Compiler + Tools |

---

## Appendix D: References

1. [Vulkan Specification](https://registry.khronos.org/vulkan/specs/1.3/html/)
2. [SPIR-V Specification](https://registry.khronos.org/SPIR-V/specs/unified1/SPIRV.html)
3. [rust-gpu Project](https://github.com/EmbarkStudios/rust-gpu)
4. [wgpu Design Notes](https://github.com/gfx-rs/wgpu)
5. [Frame Graph: Extensible Rendering Architecture in Frostbite](https://www.gdcvault.com/play/1024612/)
6. [GPU-Driven Rendering Pipelines](https://advances.realtimerendering.com/s2015/)
7. [Mesh Shaders Overview](https://developer.nvidia.com/blog/introduction-turing-mesh-shaders/)

---

*Document Version: 1.1.0*
*Last Updated: February 2, 2026*
*Status: Active Development*
